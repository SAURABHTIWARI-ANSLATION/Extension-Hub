<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON/XML Formatter</title>
    <link rel="stylesheet" href="theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="popup.css">
</head>
<body class="theme-ocean-blue">
    <div class="popup-container">
        <!-- Header -->
        <header class="popup-header">
            <div class="header-content">
                <div class="header-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20ZM7 13H17V15H7V13ZM7 17H14V19H7V17Z" 
                              fill="var(--theme-accent-color)"/>
                        <path d="M16.5 12C16.5 10.62 15.38 9.5 14 9.5C12.62 9.5 11.5 10.62 11.5 12C11.5 13.38 12.62 14.5 14 14.5C15.38 14.5 16.5 13.38 16.5 12Z" 
                              fill="var(--bg-primary)"/>
                    </svg>
                </div>
                <div class="header-text">
                    <h1>JSON/XML Formatter</h1>
                    <p class="subtitle">Format and beautify API responses instantly</p>
                </div>
                <button class="icon-btn" id="settingsBtn" title="Settings">
                    <svg width="20" height="20" fill="var(--text-secondary)" viewBox="0 0 24 24">
                        <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-2 0-3.6-1.6-3.6-3.6s1.6-3.6 3.6-3.6 3.6 1.6 3.6 3.6-1.6 3.6-3.6 3.6z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="popup-main">
            <!-- Format Type Selection -->
            <section class="format-type-section theme-card">
                <div class="section-header">
                    <h3>Format Type</h3>
                    <div class="status-indicator" id="detectedFormat">
                        <span class="status-dot"></span>
                        <span>Auto-detect</span>
                    </div>
                </div>
                <div class="format-tabs">
                    <button class="format-tab active" data-format="json">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm2 2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H7z"/>
                        </svg>
                        JSON
                    </button>
                    <button class="format-tab" data-format="xml">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.89 3L14.85 3.4L11.11 21L9.15 20.6L12.89 3M19.59 12L16 8.41V5.58L22.42 12L16 18.41V15.58L19.59 12M1.58 12L8 5.58V8.41L4.41 12L8 15.58V18.41L1.58 12Z"/>
                        </svg>
                        XML
                    </button>
                    <button class="format-tab" data-format="auto">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,16A3,3 0 0,1 9,13C9,11.88 9.61,10.9 10.5,10.39L20.21,4.77L14.68,14.35C14.18,15.33 13.17,16 12,16M12,3C13.81,3 15.5,3.5 16.97,4.32L14.87,5.53C14,5.19 13,5 12,5A8,8 0 0,0 4,13C4,15.21 4.89,17.21 6.34,18.65H6.35C6.74,19.04 6.74,19.67 6.35,20.06C5.96,20.45 5.32,20.45 4.93,20.06C3.12,18.26 2,15.76 2,13A10,10 0 0,1 12,3M22,13C22,15.76 20.88,18.26 19.07,20.06C18.68,20.45 18.05,20.45 17.66,20.06C17.27,19.67 17.27,19.04 17.66,18.65C19.11,17.2 20,15.21 20,13C20,12 19.81,11 19.47,10.13L20.68,8.03C21.5,9.5 22,11.19 22,13Z"/>
                        </svg>
                        Auto Detect
                    </button>
                </div>
            </section>

            <!-- Input Section -->
            <section class="input-section theme-card">
                <div class="section-header">
                    <h3>Input Data</h3>
                    <div class="input-actions">
                        <button class="icon-btn" id="clearBtn" title="Clear">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="pasteBtn" title="Paste">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="sampleBtn" title="Load Sample">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="input-container">
                    <textarea id="inputText" class="code-editor" 
                              placeholder="Paste your JSON or XML here...&#10;Or click 'Paste' to paste from clipboard&#10;Or click 'Sample' for example data"
                              spellcheck="false"></textarea>
                    <div class="input-stats">
                        <span id="charCount">0 characters</span>
                        <span id="lineCount">0 lines</span>
                        <span id="sizeInfo">0 bytes</span>
                    </div>
                </div>
            </section>

            <!-- Formatting Options -->
            <section class="options-section theme-card">
                <div class="section-header">
                    <h3>Formatting Options</h3>
                    <button class="theme-btn theme-btn-primary" id="formatBtn">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                        </svg>
                        Format Now
                    </button>
                </div>
                
                <div class="options-grid">
                    <!-- JSON Options -->
                    <div class="option-group" data-format="json">
                        <label class="option-label">
                            <input type="checkbox" id="jsonSortKeys" checked>
                            <span>Sort keys alphabetically</span>
                        </label>
                        <label class="option-label">
                            <input type="checkbox" id="jsonQuoteKeys" checked>
                            <span>Quote keys with double quotes</span>
                        </label>
                        <div class="option-row">
                            <label class="option-label">Indentation:</label>
                            <select id="jsonIndent" class="theme-input">
                                <option value="2">2 spaces</option>
                                <option value="4" selected>4 spaces</option>
                                <option value="tab">Tab</option>
                                <option value="0">Minified</option>
                            </select>
                        </div>
                    </div>

                    <!-- XML Options -->
                    <div class="option-group" data-format="xml" style="display: none;">
                        <label class="option-label">
                            <input type="checkbox" id="xmlSelfClose" checked>
                            <span>Self-close empty tags</span>
                        </label>
                        <label class="option-label">
                            <input type="checkbox" id="xmlAttributes" checked>
                            <span>Separate attributes on new lines</span>
                        </label>
                        <div class="option-row">
                            <label class="option-label">Indentation:</label>
                            <select id="xmlIndent" class="theme-input">
                                <option value="2">2 spaces</option>
                                <option value="4" selected>4 spaces</option>
                                <option value="tab">Tab</option>
                            </select>
                        </div>
                    </div>

                    <!-- General Options -->
                    <div class="option-group">
                        <label class="option-label">
                            <input type="checkbox" id="highlightSyntax" checked>
                            <span>Enable syntax highlighting</span>
                        </label>
                        <label class="option-label">
                            <input type="checkbox" id="lineNumbers" checked>
                            <span>Show line numbers</span>
                        </label>
                        <label class="option-label">
                            <input type="checkbox" id="autoFormat">
                            <span>Auto-format on paste</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Output Section -->
            <section class="output-section theme-card">
                <div class="section-header">
                    <h3>Formatted Output</h3>
                    <div class="output-actions">
                        <button class="icon-btn" id="copyBtn" title="Copy to clipboard">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="downloadBtn" title="Download">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="expandBtn" title="Expand view">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="output-container">
                    <div class="output-header">
                        <div class="format-badge" id="outputFormat">JSON</div>
                        <div class="output-stats">
                            <span id="outputSize">0 bytes</span>
                            <span id="outputTime">0ms</span>
                        </div>
                    </div>
                    <div class="code-output" id="outputText">
                        <div class="empty-output">
                            <svg width="48" height="48" fill="var(--text-muted)" viewBox="0 0 24 24">
                                <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM18 20H6V4H13V9H18V20ZM7 13H17V15H7V13ZM7 17H14V19H7V17Z"/>
                            </svg>
                            <p>Formatted output will appear here</p>
                            <p class="empty-hint">Click "Format Now" or paste data to begin</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="quick-actions theme-card">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button class="theme-btn theme-btn-secondary" id="validateBtn">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        Validate
                    </button>
                    <button class="theme-btn theme-btn-secondary" id="minifyBtn">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M6 19h12v2H6z"/>
                        </svg>
                        Minify
                    </button>
                    <button class="theme-btn theme-btn-secondary" id="escapeBtn">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                        Escape/Unescape
                    </button>
                    <button class="theme-btn theme-btn-secondary" id="convertBtn">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
                        </svg>
                        JSON ↔ XML
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="popup-footer">
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-icon" id="statusIcon">✓</span>
                    <span class="status-text" id="statusText">Ready</span>
                </div>
                <div class="footer-actions">
                    <button class="text-btn" id="quickFormatToggle">
                        <svg width="14" height="14" fill="currentColor" viewBox="0 0 24 24" style="margin-right: 4px;">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                        </svg>
                        Auto-format: <span id="autoFormatStatus">Off</span>
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <script src="popup.js"></script>
</body>
</html>